<!-- views/frontend/slider/testimonialUI.ejs -->

<form id="testimonialForm" class="testimonial-form" action="/frontend/testimonial/save" method="POST"
    enctype="multipart/form-data">
    <% if (testimonial && testimonial.id) { %>
        <input type="hidden" name="id" value="<%= testimonial.id %>">
        <% } %>

            <div class="form-group mb-3">
                <label for="name" class="form-label required-field">Name</label>
                <input type="text" id="name" name="name" class="form-control" value="<%= testimonial.name || '' %>"
                    required>
            </div>

            <div class="form-group mb-3">
                <label for="surname" class="form-label required-field">Surname</label>
                <input type="text" id="surname" name="surname" class="form-control"
                    value="<%= testimonial.surname || '' %>" required>
            </div>

            <div class="form-group mb-3">
                <label for="rank" class="form-label required-field">Rank</label>
                <select id="rank" name="rank" class="form-control" required>
                    <% const currentRank=testimonial.rank || 'center' ; %>
                        <% ['1', '2' , '3' , '4' , '5' ].forEach(option=> { %>
                            <option value="<%= option %>" <%=currentRank===option ? 'selected' : '' %>>
                                <%= option.charAt(0).toUpperCase() + option.slice(1) %>
                            </option>
                            <% }); %>
                </select>
            </div>

            <div class="form-group mb-3">
                <label for="description" class="form-label required-field">Description</label>
                <textarea id="description" name="description" class="form-control" rows="3"
                    required><%= testimonial.description || '' %></textarea>
            </div>

            <!-- Photo -->
            <div class="form-group mb-3">
                <label class="form-label required-field required-field">Photo</label>
                <div class="drag-drop-area text-center p-3 border border-2 border-dashed rounded"
                    id="testimonialPhotoDropArea" style="cursor: pointer;">
                    <i class="fas fa-cloud-upload-alt fa-2x mb-2 text-secondary"></i>
                    <p class="mb-2">Drag & Drop your photo here or click to browse</p>
                    <button type="button" class="btn btn-sm btn-outline-primary"
                        onclick="document.getElementById('testimonialPhotoInput').click()">Select File</button>
                    <input type="file" name="photo" id="testimonialPhotoInput" accept="image/*" style="display: none;">
                </div>

                <div class="drop-area mt-3" id="testimonialPhotoPreview">
                    <% if (testimonial?.photo) { %>
                        <div class="preview-item position-relative d-inline-block">
                            <img src="/uploads/testimonial/<%= testimonial.photo %>" alt="Current photo"
                                style="max-width:200px; max-height:150px; border-radius:8px; border:1px solid #ddd;">
                            <button type="button" class="btn btn-danger btn-sm remove-current-photo"
                                style="position:absolute;top:5px;right:5px;" onclick="removeImage('sliderPhoto')">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                        <input type="hidden" name="current_photo" value="<%= testimonial.photo %>">
                        <% } %>
                </div>
            </div>


            <button type="submit"
                class="btn btn-primary bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded">
                Save
            </button>
</form>