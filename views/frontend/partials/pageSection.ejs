<!-- views/frontend/partials/pageSection.ejs -->
<div id="alertMessage" class="alert-message" style="display: none;"></div>

<div class="d-flex page-section">
  <!-- Sidebar Menus -->
  <div class="menu-sidebar page-section">
    <ul class="menu-list">
      <% if (menus.length> 0) { %>
        <% menus.forEach((menu, idx)=> { %>
          <li class="menu-item1 <%= idx === 0 ? 'active' : '' %>" data-menu="<%= menu.id %>">
            <a href="javascript:void(0)" class="menu-link">
              <i class="far fa-arrow-alt-circle-right"></i>
              <span class="menu-text">
                <%= menu.title %>
              </span>
            </a>
          </li>
          <% }) %>
            <% } else { %>
              <li>No menus found</li>
              <% } %>
    </ul>
  </div>

  <!-- Content Area -->
 <div class="content-area">
  <% menus.forEach((menu, idx) => { 
    const cats = categoriesByMenu[menu.id] || []; 
  %>

    <!-- Tabs -->
    <ul class="nav nav-tabs menu-tabs <%= idx === 0 ? '' : 'd-none' %>" id="tabs-<%= menu.id %>">
      <% cats.forEach((cat, i) => { %>
        <li class="nav-item">
          <a class="nav-link <%= i === 0 ? 'active' : '' %>" data-bs-toggle="tab" href="#tab-<%= cat.id %>">
            <%= cat.menu_category_title %>
          </a>
        </li>
      <% }) %>
    </ul>

    <!-- Tab Contents -->
    <div class="tab-content <%= idx === 0 ? '' : 'd-none' %>" id="content-<%= menu.id %>">
      <% cats.forEach((cat, i) => { %>
        <div class="tab-pane fade <%= i === 0 ? 'show active' : '' %>" id="tab-<%= cat.id %>">

          <div class="section-content" data-slug="<%= cat.menu_category_slug %>">
            Loading...
          </div>
        </div>
      <% }) %>
    </div>

  <% }) %> <!-- closes the menus.forEach only once -->
</div>

</div>